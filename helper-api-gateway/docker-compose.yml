version: '3.8'

services:
  api-gateway:
    build: .
    container_name: helper-api-gateway
    restart: unless-stopped
    ports:
      - "8080:8080"
    environment:
      SPRING_PROFILES_ACTIVE: prod
      APP_JWT_SECRET: ${APP_JWT_SECRET:-YOUR_JWT_SECRET_KEY_CHANGE_THIS_IN_PRODUCTION_MIN_256_BITS_LONG_ENOUGH}
      AUTH_SERVICE_URL: ${AUTH_SERVICE_URL:-http://auth-service:8081}
      TASK_SERVICE_URL: ${TASK_SERVICE_URL:-http://task-service:8082}
      USER_SERVICE_URL: ${USER_SERVICE_URL:-http://user-service:8083}
      PAYMENT_SERVICE_URL: ${PAYMENT_SERVICE_URL:-http://payment-service:8084}
      RATING_SERVICE_URL: ${RATING_SERVICE_URL:-http://rating-service:8085}
      NOTIFICATION_SERVICE_URL: ${NOTIFICATION_SERVICE_URL:-http://notification-service:8086}
      REDIS_HOST: ${REDIS_HOST:-redis}
      REDIS_PORT: ${REDIS_PORT:-6379}
    depends_on:
      - auth-service
      - task-service
      - user-service
      - payment-service
      - rating-service
      - notification-service
